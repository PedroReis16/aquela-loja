<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org">


<body>
  <div class="header" th:fragment="header">
    <script th:src="@{/js/components/menu-toggle.js}" defer></script>
    <div class="main-header">
      <div class="logo-container">
        <menu-toggle id="menuToggle" class="occultable"></menu-toggle>

        <a href="/" class="logo-link">
          <img th:src="@{/images/logo.png}" alt="" id="logo" />
        </a>

        <div id="logoCart" class="occultable" th:insert="~{fragments/shopping-cart::shoppingCart}"></div>
      </div>

      <div th:insert="~{fragments/search-bar::searchBar}" class="occultable"></div>

      <div class="action-pages occultable">
        <div th:insert="~{fragments/user-avatar::userAvatar}"></div>

        <div id="normalCart" th:insert="~{fragments/shopping-cart::shoppingCart}"></div>
      </div>
    </div>

    <div id="menuContainer" class="occultable">
      <div class="mobile-user-avatar">
        <img th:src="@{/images/robo-avatar.png}" />

        <p sec:authorize="isAuthenticated()">
          <a id="userRedirect" href="/usuario">Olá, <span th:text="${#authentication.name}">Usuário</span>
          </a>
        </p>
        <!-- Caso não esteja autenticado -->

        <p sec:authorize="!isAuthenticated()">
          Olá, visitante!
        </p>

      </div>


      <div id="departamentList" th:replace="~{fragments/departaments::departaments}"></div>

      <div class="user-auth-actions">
        <!-- Caso não esteja autenticado -->
        <div id="authorizedBtns" sec:authorize="!isAuthenticated()">
          <a class="confirm-button" href="/login">Entre</a>
          <a id="signUpLink" href="/cadastro">Cadastre-se</a>
        </div>
        <!-- Caso esteja autenticado -->
        <div id="logoutLink" sec:authorize="isAuthenticated()">
          <a class="confirm-button" href="/logout">Sair</a>
        </div>
      </div>
    </div>

    <script th:src="@{/js/fragments_scripts/header.js}"></script>
  </div>


</body>

</html>