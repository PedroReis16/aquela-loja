<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Conta</title>

    <link th:href="@{/styles/reset.css}" rel="stylesheet" />
    <link th:href="@{/styles/style.css}" rel="stylesheet" />

    <script th:src="@{/js/components/card.js}" defer></script>
</head>

<body>
    <header th:replace="~{fragments/header :: header}"></header>

    <main>
        <div class="cadastro-container">
            <custom-card id="formCard">
                <div class="card-content">
                    <form id="formCadastro" th:action="@{/user/registration}" th:object="${newUserDto}" method="post">
                        <!-- Etapa 1: Criar Conta -->
                        <div class="form-step active" id="step1">
                            <h1 class="cadastro-title">Criar Conta</h1>
                            <div id="userDetailsForm">

                                <div id="usernameContainer">
                                    <div class="input-label">
                                        <i id="personIcon"></i>
                                        <input type="text" id="nameInput" name="nomeCompleto"
                                            placeholder="Nome Completo" th:field="*{username}" required>
                                        <label for="nomeCompleto"></label>
                                    </div>
                                    <p id="personNameErrorMessage" class="error-message"></p>
                                </div>

                                <div class="document-container">
                                    <div class="input-label">
                                        <i id="documentIcon"></i>
                                        <input id="cpfInput" type="tel" name="cpf" placeholder="CPF"
                                            th:field="*{document}" maxlength="14" required>
                                        <label for="cpf"></label>
                                    </div>
                                    <p id="documentErrorMessage" class="error-message"></p>
                                </div>

                                <div class="gender-container">
                                    <div class="input-label">
                                        <i id="genderIcon"></i>
                                        <select id="genderSelect" class="custom-select" th:field="*{gender}">
                                            <option value="Male">Masculino</option>
                                            <option value="Female">Feminino</option>
                                            <option value="Other">Outro</option>
                                        </select>
                                    </div>
                                    <p id="genderErrorMessage" class="error-message"></p>
                                </div>

                                <div class="phone-container">
                                    <div class="input-label">
                                        <i id="phoneIcon"></i>
                                        <input type="tel" id="phoneInput" name="telefone" placeholder="Telefone"
                                            th:field="*{phone}" required>
                                        <label for="telefone"></label>
                                    </div>
                                    <p id="phoneErrorMessage" class="error-message"></p>
                                </div>

                                <div class="birthdate-container">
                                    <div class="input-label">
                                        <i id="birthIcon"></i>
                                        <input type="text" id="birthdateInput" name="dataNascimento"
                                            placeholder="Data de nascimento" th:field="*{birthdate}" required>
                                        <label for="dataNascimento"></label>
                                    </div>
                                    <p id="birthdateErrorMessage" class="error-message"></p>
                                </div>

                                <div class="details-email-container">
                                    <div class="input-label">
                                        <i id="emailIcon"></i>
                                        <input type="email" id="emailInput" placeholder="Email" th:field="*{email}"
                                            required />
                                    </div>
                                    <p id="emailErrorMessage" class="error-message"></p>
                                </div>

                                <div class="details-password-container">
                                    <div class="input-label">
                                        <i class="password-icon"></i>
                                        <input type="password" id="passwordInput" placeholder="Senha" required />
                                        <button type="button" class="visibility-control" id="passwordBtn"></button>
                                    </div>
                                    <p id="passwordErrorMessage" class="error-message"></p>
                                </div>

                                <div class="details-confirm-password-container">
                                    <div class="input-label">
                                        <i class="password-icon"></i>
                                        <input type="password" id="confirmPasswordInput" placeholder="Confirmar Senha"
                                            th:field="*{password}" required />

                                        <button type="button" class="visibility-control"
                                            id="confirmPasswordBtn"></button>
                                    </div>
                                    <p id="confirmPasswordErrorMessage" class="error-message"></p>
                                </div>

                            </div>

                            <button type="button" class="confirm-button cadastro-btn" id="nextStepBtn">
                                <p>Continuar<i></i></p>
                            </button>
                        </div>

                        <!-- Etapa 2: Adicionar endereço -->
                        <div class="form-step" id="step2">
                            <p class="endereco-header cadastro-title" id="previousStepBtn"> <i></i>Adicionar endereço
                            </p>

                            <div id="userAddressForm">

                                <div class="cep-container">
                                    <div class="input-label">
                                        <i id="cepIcon"></i>
                                        <input type="text" id="cepInput" name="cep" placeholder="CEP" th:field="*{cep}"
                                            required>
                                        <label for="cep"></label>
                                    </div>
                                    <p id="CEPInputErrorMessage" class="error-message"></p>
                                </div>
                                <div class="identifier-container">
                                    <div class="input-label">
                                        <i id="idIcon"></i>
                                        <input type="text" id="addressIdInput" name="identificacao"
                                            placeholder="Identificação" th:field="*{addressIdentification}" required>
                                        <label for="identificacao"></label>
                                    </div>
                                    <p id="identificationInputError" class="error-message"></p>
                                </div>

                                <div class="address-input-container">
                                    <div class="input-label">
                                        <i id="streetIcon"></i>
                                        <input type="text" id="streetInput" name="endereco" placeholder="Endereço" th:field="*{street}"
                                            readonly required>
                                        <label for="endereco"></label>
                                    </div>
                                    <p id="addressInputError" class="error-message"></p>
                                </div>

                                <div class="number-container">
                                    <div class="input-label">
                                        <i id="numberIcon"></i>
                                        <input type="number" id="numberInput" name="numero" placeholder="Número"
                                            th:field="*{number}" required>
                                        <label for="numero"></label>
                                    </div>
                                    <p id="numberInputError" class="error-message"></p>
                                </div>

                                <div class="neighborhood-container">
                                    <div class="input-label">
                                        <i id="neighborhoodIcon"></i>
                                        <input type="text" id="neighborhoodInput" name="bairro" placeholder="Bairro" th:field="*{neighborhood}"
                                            readonly required>
                                        <label for="bairro"></label>
                                    </div>
                                    <p id="neighborhoodInputError" class="error-message"></p>
                                </div>

                                <div class="city-container">
                                    <div class="input-label">
                                        <i id="cityIcon"></i>
                                        <input type="text" id="cityInput" name="cidade" placeholder="Cidade" th:field="*{city}"
                                            readonly required>
                                        <label for="cidade"></label>
                                    </div>
                                    <p id="cityInputError" class="error-message"></p>
                                </div>

                                <div class="state-container">
                                    <div class="input-label">
                                        <i id="stateIcon"></i>
                                        <input type="text" id="stateInput" name="estado" placeholder="Estado" th:field="*{state}"
                                            readonly required>
                                        <label for="estado"></label>
                                    </div>
                                    <p id="stateInputError" class="error-message"></p>
                                </div>

                                <div class="complement-container">
                                    <div class="input-label">
                                        <i id="complementIcon"></i>
                                        <input type="text" id="complementInput" name="complemento" placeholder="Complemento"
                                            th:field="*{complement}">
                                        <label for="complemento"></label>
                                    </div>
                                    <p id="complementInputError" class="error-message"></p>
                                </div>

                                <div class="reference-container">
                                    <div class="input-label">
                                        <i id="referenceIcon"></i>
                                        <input type="text" id="referenceInput" name="referencia" placeholder="Referência"
                                            th:field="*{reference}">
                                        <label for="referencia"></label>
                                    </div>
                                    <p id="referenceInputError" class="error-message"></p>
                                </div>

                            </div>

                            <button type="submit" class="confirm-button cadastro-btn">Salvar</button>
                        </div>
                    </form>

                    <p id="redirectToLogin">Lembrou que aquela conta ainda existe? <a href="/login">Entre agora</a></p>
                </div>

            </custom-card>
        </div>

    </main>

    <script type="module" th:src="@{/js/page_scripts/cadastro.js}"></script>
</body>

</html>